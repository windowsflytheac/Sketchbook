<!DOCTYPE html>
<html>
<head>
  <title>Sketchbook Portal Gun</title>
  <style>
    body { margin: 0; overflow: hidden; }
  </style>
</head>
<body>
  <script src="build/sketchbook.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/examples/js/loaders/GLTFLoader.js"></script>

  <script>
    const world = new Sketchbook.World('build/assets/world.glb');

    world.ready.then(() => {
      const scene = world.scene;
      const camera = world.camera;

      // Create weapon group attached to camera
      const weaponGroup = new THREE.Group();
      camera.add(weaponGroup);
      scene.add(camera);

      weaponGroup.position.set(0.5, -0.7, -1);
      weaponGroup.rotation.set(0, 0, 0);
      weaponGroup.visible = false; // hidden initially

      const loader = new THREE.GLTFLoader();
      loader.load('build/assets/models/mel_portal_gun.glb', (gltf) => {
        const portalGun = gltf.scene;
        portalGun.scale.set(1.5, 1.5, 1.5);
        weaponGroup.add(portalGun);
      });

      // Toggle portal gun visibility on 'C' key
      window.addEventListener('keydown', (e) => {
        if (e.key.toLowerCase() === 'c') {
          weaponGroup.visible = !weaponGroup.visible;
        }
      });
    });
  </script>
</body>
</html>
